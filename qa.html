<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<title>প্রশ্নোত্তর</title>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js"></script>
<style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f9f9f9; }
    input, textarea { width: 100%; padding: 8px; margin: 6px 0; border-radius: 6px; border: 1px solid #ccc; }
    button { padding: 8px 20px; background: #198754; color: #fff; border: none; border-radius: 6px; cursor: pointer; }
    .question { background: #fff; padding: 10px; margin: 8px 0; border-radius: 6px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
    .answer { color: green; font-weight: bold; margin-top: 5px; }
</style>
</head>
<body>

<h2>প্রশ্ন করুন</h2>
<input type="text" id="userName" placeholder="আপনার নাম">
<textarea id="userQuestion" placeholder="আপনার প্রশ্ন লিখুন"></textarea>
<button onclick="submitQuestion()">জমা দিন</button>

<h2>প্রশ্ন ও উত্তর</h2>
<div id="questionsList"></div>

<script>
  // Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyDZU9TtNXcpWW_jp366Kf2eWaN8QjigVeU",
    authDomain: "islamicworldskm.firebaseapp.com",
    projectId: "islamicworldskm",
    storageBucket: "islamicworldskm.firebasestorage.app",
    messagingSenderId: "703538391992",
    appId: "1:703538391992:web:9a36ea8c6f190fb3be3d4d"
  };

  // Initialize Firebase
  const app = firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  const questionsRef = db.collection("questions");

  // প্রশ্ন জমা দেওয়া
  function submitQuestion() {
    const name = document.getElementById("userName").value.trim();
    const question = document.getElementById("userQuestion").value.trim();

    if(!name || !question) { alert("সব ঘর পূরণ করুন!"); return; }

    questionsRef.add({
      name: name,
      questionText: question,
      timestamp: firebase.firestore.FieldValue.serverTimestamp()
    }).then(() => {
      alert("আপনার প্রশ্ন সফলভাবে জমা হয়েছে!");
      document.getElementById("userName").value = "";
      document.getElementById("userQuestion").value = "";
    });
  }

  // সব প্রশ্ন দেখানো (Live updates)
  questionsRef.orderBy("timestamp","desc").onSnapshot(snapshot => {
    const list = document.getElementById("questionsList");
    list.innerHTML = "";
    snapshot.forEach(doc => {
      const data = doc.data();
      const div = document.createElement("div");
      div.className = "question";
      div.innerHTML = `<b>${data.name}</b>: ${data.questionText}<br>
                       <span class="answer">${data.answer ? "উত্তর: "+data.answer : "উত্তর এখনও দেওয়া হয়নি"}</span>`;
      list.appendChild(div);
    });
  });
</script>

</body>
</html>