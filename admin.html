<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <title>অ্যাডমিন প্যানেল</title>
</head>
<body>
  <h2>প্রশ্ন ও উত্তর</h2>
  <div id="questions"></div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js"></script>

  <script>
    // ✅ Firebase Config
    const firebaseConfig = {
      apiKey: "AIzaSyDZU9TtNXcpWW_jp366Kf2eWaN8QjigVeU",
      authDomain: "islamicworldskm.firebaseapp.com",
      projectId: "islamicworldskm",
      storageBucket: "islamicworldskm.firebasestorage.app",
      messagingSenderId: "703538391992",
      appId: "1:703538391992:web:9a36ea8c6f190fb3be3d4d"
    };

    // ✅ Initialize Firebase
    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // ✅ প্রশ্ন লোড করা
    const questionsDiv = document.getElementById("questions");

    db.collection("questions").orderBy("time", "desc").onSnapshot(snapshot => {
      questionsDiv.innerHTML = "";
      snapshot.forEach(doc => {
        const data = doc.data();
        questionsDiv.innerHTML += `
          <div style="border:1px solid gray; padding:10px; margin:10px;">
            <p><b>${data.name}</b>: ${data.question}</p>
            <p><b>উত্তর:</b> ${data.answer || "এখনো উত্তর দেওয়া হয়নি"}</p>
            <textarea id="answer-${doc.id}" placeholder="উত্তর লিখুন...">${data.answer}</textarea>
            <button onclick="saveAnswer('${doc.id}')">সেভ করুন</button>
          </div>
        `;
      });
    });

    // ✅ উত্তর সেভ করা
    async function saveAnswer(id) {
      const answerText = document.getElementById("answer-" + id).value;
      await db.collection("questions").doc(id).update({
        answer: answerText
      });
      alert("উত্তর সংরক্ষণ হয়েছে!");
    }
  </script>
</body>
</html>