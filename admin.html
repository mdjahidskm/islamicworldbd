<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶™‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body {
      font-family: Arial, sans-serif;
      background:#f9f9f9;
      margin:0;
      padding:0;
    }
    header {
      background:#198754;
      color:#fff;
      padding:15px;
      text-align:center;
    }
    header h1 {margin:0;}
    nav {
      display:flex;
      justify-content:center;
      padding:10px;
      background:#145c3e;
    }
    nav a {
      color:#fff;
      text-decoration:none;
      padding:8px 15px;
      margin:0 5px;
      border-radius:5px;
      background:#198754;
    }
    nav a:hover {background:#10724a;}
    #questions {
      max-width:800px;
      margin:20px auto;
    }
    .question-card {
      background:#fff;
      border-radius:8px;
      box-shadow:0 2px 5px rgba(0,0,0,0.1);
      padding:15px;
      margin:10px 0;
    }
    .question-card b {color:#198754;}
    textarea {
      width:100%;
      padding:8px;
      margin:8px 0;
      border-radius:5px;
      border:1px solid #ccc;
      resize:none;
    }
    button.save-btn {
      padding:8px 15px;
      background:#198754;
      color:#fff;
      border:none;
      border-radius:5px;
      cursor:pointer;
    }
    button.save-btn:hover {background:#10724a;}
  </style>
</head>
<body>

<header>
  <h1>‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶™‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤</h1>
</header>

<nav>
  <a href="index.html"><i class="fas fa-home"></i> ‡¶π‡ßã‡¶Æ‡ßá ‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶®</a>
</nav>

<div id="login-section" style="text-align:center; margin-top:20px;">
  <button id="loginBtn" style="padding:10px 20px; background:#198754; color:#fff; border:none; border-radius:5px; cursor:pointer;">
    ‡¶ó‡ßÅ‡¶ó‡¶≤ ‡¶≤‡¶ó‡¶á‡¶®
  </button>
</div>

<div id="questions"></div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js"></script>
<script>
  // Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyDZU9TtNXcpWW_jp366Kf2eWaN8QjigVeU",
    authDomain: "islamicworldskm.firebaseapp.com",
    projectId: "islamicworldskm",
    storageBucket: "islamicworldskm.firebasestorage.app",
    messagingSenderId: "703538391992",
    appId: "1:703538391992:web:9a36ea8c6f190fb3be3d"
  };

  // Initialize Firebase
  const app = firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();
  const auth = firebase.auth();

  const adminEmail = "mdjahidskm@gmail.com";

  const loginBtn = document.getElementById("loginBtn");
  const loginSection = document.getElementById("login-section");
  const questionsDiv = document.getElementById("questions");

  loginBtn.addEventListener("click", () => {
    const provider = new firebase.auth.GoogleAuthProvider();
    auth.signInWithPopup(provider);
  });

  auth.onAuthStateChanged(user => {
    if (user && user.email === adminEmail) {
      loginSection.style.display = "none";
      loadQuestions();
    } else if (user) {
      alert("üö´ ‡¶Ü‡¶™‡¶®‡¶ø ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶®‡¶®!");
      auth.signOut();
    }
  });

  function loadQuestions() {
    db.collection("questions").orderBy("timestamp","desc").onSnapshot(snapshot => {
      questionsDiv.innerHTML = "";
      snapshot.forEach(doc => {
        const q = doc.data();
        questionsDiv.innerHTML += `
          <div class="question-card">
            <b>${q.name}</b> ‡¶ú‡¶ø‡¶ú‡ßç‡¶û‡ßá‡¶∏ ‡¶ï‡¶∞‡ßá‡¶õ‡ßá‡¶®:<br>
            ${q.questionText}<br><br>
            <b>‡¶â‡¶§‡ßç‡¶§‡¶∞:</b><br>
            <textarea id="answer-${doc.id}" placeholder="‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®">${q.answer || ""}</textarea><br>
            <button class="save-btn" onclick="saveAnswer('${doc.id}')">‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
          </div>
        `;
      });
    });
  }

  async function saveAnswer(id){
    const answerText = document.getElementById("answer-" + id).value;
    try {
      await db.collection("questions").doc(id).update({ answer: answerText });
      alert("‚úÖ ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá");
    } catch(err) {
      console.error(err);
      alert("‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£ ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!");
    }
  }
</script>

</body>
</html>